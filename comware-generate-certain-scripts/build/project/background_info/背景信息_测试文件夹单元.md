## 测试文件夹单元
### 测试文件夹单元,的组成元素解释
```
├── testFolderUnit/
│   ├── __init__.py,py语言的结构文件
│   └── xx.topox,数通领域的背景测试组网,即交换机和路由器的网络
│   └── conftest.py,多个测试脚本(py)公共的数通领域背景配置
│   └── test_xx_1.py,测试文件,用来测试数通特性是否符合预期
│   └── test_xx_n.py,测试文件,用来测试数通特性是否符合预期
```
### 测试脚本,的结构解析
```测试py脚本
# 导包操作

# py元数据描述,包含当前py所属模块,映射的测试点编号,所属项目信息,编写人等信息

# 当前py可能用到的函数,提前封装好,(可选项)

class TestClass:
    @classmethod
    def setup_class(cls):
	    # conftest.py的公共配置,不满足当前py需求,需要增量配置
        # 当前py用于增量配置环境,具体实现...

    @classmethod
    def teardown_class(cls):
		# 将设备环境,恢复到conftest.py的公共配置,不能影响其他py使用同一套环境
        # 用于清空增量配置环境,类似于现场恢复,具体实现...

    def test_step_1(self):
        # 一般情况下,该函数校验增量配置环境,是否满足预期,即增量配置是否正常下发
        # 也可以直接开始测试(不推荐)

    def test_step_2(self):
        # 开始具体的功能测试,
		# 动作集合包括但不限于,下发各种命令(增删改),打流(模拟报文发送)
		# 检查集合包括但不限于,下发命令(查)校验回显结果是否符合预期,抓包(抓取报文)分析报文内容或传播是否符合预期

    ...

    def test_step_n(self):
        # ...
```

### 测试文件夹,在测试框架中的运行过程
1. 前置校验: 测试框架,校验测试文件夹,的完整性,是否包含所有必须文件
  - 必须文件列表,[__init__.py, xx.topox, conftest.py, test_xx_1.py, ..., test_xx_n.py]
2. 申请环境: 测试框架,读取'xx.topox'内容,从云上实验室申请设备(路由器/交换机)
3. 配置所有py公共环境: 测试框架,读取'conftest.py'内容,对申请的设备进行配置,例如配置IP地址/ISIS协议/BGP协议/VLAN口等
4. 逐个运行测试py文件: 测试框架,从上往下依次运行'test_xx_1.py',...,'test_xx_n.py'文件
5. 记录运行日志: 测试框架,记录从1到4过程中,所有日志信息,供用户后期校验

### 测试py文件,在测试框架中的运行过程
0. 进入py
1. 加载TestClass类: 测试框架,加载'test_xx_n.py'文件,通过反射特性获取TestClass类
2. 下发py私有配置: 测试框架,调用'setup_class'函数,配置私有配置
3. 逐个运行测试函数: 测试框架,从上往下依次运行'def test_xx',...,'def test_xx'函数
4. 现场恢复: 测试框架,调用'teardown_class'函数,清除私有配置
5. 退出py

### 测试框架,注意点
1. 一个测试文件夹,是测试的最小单元,每一个测试文件夹独享一个环境(路由器/交换机)
  - 该环境是干净的,每个设备都是刚启动的状态
2. 测试文件夹内,多个py共享一个环境,配置会相互影响,所以py唯一公用的配置,就是'conftest.py'中的内容
  - 例如,'test_xx_1.py'的配置如果残留,就可能影响'test_xx_n.py'的测试结果
  - 一般情况下,每个测试py,在(setup_class)下发自己私有配置后,需要(teardown_class)在退出时,现场恢复,环境需要恢复到使用前的状态
