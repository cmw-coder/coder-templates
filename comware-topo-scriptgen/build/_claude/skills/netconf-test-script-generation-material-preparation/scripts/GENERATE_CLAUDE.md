

## 1. 项目话概述

基于 `pypilot` 工具，为具有多个配置分支的网络设备生成 `netconf/yang` 测试脚本。核心是**以特定分支的 `yin` 文件为绝对基准**，结合设备命令原型、通用测试接口及规范，补全 `test_netconf.py` 文件，以实现对该分支下指定 Netconf/Yang 节点的自动化测试。补全内容需直接写入 `test_netconf.py` 文件。

## 2. 核心文件说明

需优先读取以下文件内容，所有脚本生成需基于这些文件的定义逻辑，各文件的作用与核心内容如下：

### 2.1 yin.txt (核心基准)

-   **最高优先级文件**，由特定分支的 `yang` 文件转换而来，精确定义了该分支的 Netconf 数据模型。
-   包含当前分支下 Netconf 表拥有的**权威元素 (Element)** 及其**精确的取值范围**。
-   **当 `yin.txt` 中的参数信息与 `netconf.txt` 冲突时，必须以 `yin.txt` 为准。**
-   脚本生成时，必须严格遵守其定义的数值范围。任何超出边界值的测试，其预期结果应为 `error-tag`。

### 2.2 pyPilot测试接口.txt

-   定义 Netconf 测试必需的基础接口，例如用于连接设备的 `new_netconf()`、发送 RPC 请求的 `send()`、校验返回结果的 `CheckNetconf()` 等。
-   提供接口调用示例，比如“测试 VLAN 创建”场景下的接口组合使用代码片段，明确参数传递方式与返回值处理逻辑。
-   规定测试用例格式，包括 `TestCase` 类的继承要求、`setUp()` 初始化方法与 `tearDown()` 清理方法的实现规范，确保测试脚本结构统一。
-   生成的测试脚本需**完全复用**其中定义的接口，不可自行重新实现同类功能。

### 2.3 Checklist.json

-   提供通用 NETCONF 功能测试的标准化模板和覆盖范围要求。
-   内容覆盖配置获取、数据操作（增/改/删）、边界场景、异常处理等核心维度。
-   可作为新增 NETCONF 测试点的标准化编写模板，确保测试的完备性。

### 2.4 netconf.txt

-   包含**所有四个分支合并后**的 Netconf 表信息，包括表中元素 (Element) 支持的动作。
-   由于是多分支合并文件，其内容可能与单个分支的 `yin.txt` 不完全一致，**仅作为参考**。
-   若表中某元素有 `default` 字段，表明存在默认值，需要遵守 `注意事项.md` 文件中对默认值的处理要求。

### 2.5 netconf_case.py

-   一个针对其他 Netconf 表的**参考测试脚本**。
-   可以借鉴其部分测试逻辑和方法，例如测试步骤的编排方式。
-   在生成新的测试脚本时，应参考此文件的测试风格，但必须严格遵守 `注意事项.md` 中的具体要求。

### 2.6 注意事项.md

-   包含生成测试脚本时必须遵守的各项规则和注意事项。
-   在结合其他文件生成代码前，需首先理解并遵循此文件中的所有规定。

### 2.7 test_netconf.py (目标文件)

-   待补全的测试脚本，已包含基础的依赖导入。
-   所有新生成的测试逻辑都将写入此文件。
-   应在 `TestClass` 类中定义新的测试方法，命名为 `test_step_n()`，其中 `n` 从 1 开始递增。
-   每个测试方法需覆盖 Netconf 支持的各类操作（如 `get`, `create`, `merge`, `replace` 等），并包含对参数的**边界值测试**和**异常场景测试**。不同类型的测试应使用不同的序号 `n`。
-   测试执行前，默认设备原有配置为空。可以先执行 `get` 操作验证空配置，如下发配置，可使用 `merge` 或 `replace` 操作，然后再通过 `get` 进行验证。
-   脚本生成的目标是补全此文件内部的测试方法，并保持其原有的基础结构不变。

## 工作流程

 	1. 参考netconf_cast.py补全 test_netconf.py
 	2. 结合yin进程参数准确脚本种的每个测试步骤目的和下发的参数,对参数类型,取值范围和长度等进校验。
 	1. 确保每个测试步骤间参数的对其


## 生成测试脚本约束
	1. 不要修改已经存在的测试方法，如 `setup_class()`、`teardown_class()` 等。
	2. 测试方法命名格式为 `test_step_n()`，其中 `n` 从 1 开始递增，每个xml的下发和校验参考 netconf_case.py。
	3. 测试结果校验时使用occurrences方法
	4. 不要使用pyPilot测试接口.txt或者netconf_case.py中的不存在的方法。例如`atf_assert.assert_true()`